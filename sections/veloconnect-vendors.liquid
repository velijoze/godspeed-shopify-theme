{% comment %}
  Custom – VeloConnect Vendors
  Manage supplier endpoints to prepare multi-vendor VeloConnect integration (no secrets stored here).
  Credentials will be configured server-side. This section only controls enable flags and endpoints.
{% endcomment %}

<section class="section-{{ section.id }}-padding veloconnect-vendors" id="VeloVendors-{{ section.id }}">
  <div class="page-width">
    <h2 class="h2">VeloConnect Vendors</h2>
    <p>Configure vendor endpoints and enable/disable integrations. Credentials are managed on the server.</p>

    <table class="vendors-table" role="table" style="width:100%;border-collapse:collapse">
      <thead>
        <tr style="text-align:left;border-bottom:1px solid #e5e7eb">
          <th style="padding:.5rem 0">Vendor</th>
          <th style="padding:.5rem 0">Endpoint</th>
          <th style="padding:.5rem 0">Enabled</th>
        </tr>
      </thead>
      <tbody>
        {% for block in section.blocks %}
          <tr style="border-bottom:1px solid #f0f1f3" {{ block.shopify_attributes }}>
            <td style="padding:.5rem .25rem;min-width:160px">{{ block.settings.vendor_name }}</td>
            <td style="padding:.5rem .25rem;word-break:break-all"><code>{{ block.settings.endpoint }}</code></td>
            <td style="padding:.5rem .25rem">{% if block.settings.enabled %}Yes{% else %}No{% endif %}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <div id="veloconnect-vendors-config" data-config>
      {"vendors": [
        {% for block in section.blocks %}
          {"name": {{ block.settings.vendor_name | json }}, "endpoint": {{ block.settings.endpoint | json }}, "enabled": {{ block.settings.enabled | json }}}{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Custom – VeloConnect Vendors",
  "tag": "section",
  "class": "section-veloconnect-vendors",
  "settings": [
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Top padding", "default": 28 },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Bottom padding", "default": 28 }
  ],
  "blocks": [
    {
      "type": "vendor",
      "name": "Vendor",
      "settings": [
        { "type": "text", "id": "vendor_name", "label": "Vendor name" },
        { "type": "url", "id": "endpoint", "label": "VeloConnect endpoint URL" },
        { "type": "checkbox", "id": "enabled", "label": "Enabled", "default": false }
      ]
    }
  ],
  "max_blocks": 50,
  "presets": [
    {
      "name": "Custom – VeloConnect Vendors",
      "blocks": [
        { "type": "vendor", "settings": { "vendor_name": "Abus", "endpoint": "https://partner-de.abus.com/Veloconnect", "enabled": false }},
        { "type": "vendor", "settings": { "vendor_name": "Amsler", "endpoint": "https://avcws.amslershop.ch/default.ashx", "enabled": false }},
        { "type": "vendor", "settings": { "vendor_name": "Chrissports", "endpoint": "http://chrissports.velocom.de/", "enabled": false }},
        { "type": "vendor", "settings": { "vendor_name": "Cube", "endpoint": "https://Veloconnect.cube.eu/Veloconnect", "enabled": true }},
        { "type": "vendor", "settings": { "vendor_name": "Komenda", "endpoint": "http://komenda.velocom.de/", "enabled": false }},
        { "type": "vendor", "settings": { "vendor_name": "Magura", "endpoint": "http://magura.velocom.de/", "enabled": false }},
        { "type": "vendor", "settings": { "vendor_name": "Maxxis", "endpoint": "https://velo.maxxisstore.de/", "enabled": false }},
        { "type": "vendor", "settings": { "vendor_name": "Orbea", "endpoint": "https://api.orbea.veloconnect.io/", "enabled": false }},
        { "type": "vendor", "settings": { "vendor_name": "SKS", "endpoint": "http://sks.velocom.de/veloconnect", "enabled": false }},
        { "type": "vendor", "settings": { "vendor_name": "Tour de Suisse", "endpoint": "http://shop.tds-rad.ch/vc/", "enabled": false }}
      ]
    }
  ]
}
{% endschema %}


