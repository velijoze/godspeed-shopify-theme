<section class="section-{{ section.id }}-padding bike-comparison-tool">
  <div class="page-width">
    <div class="title-wrapper-with-link">
      <h2 class="title h1">{{ section.settings.heading }}</h2>
      {% if section.settings.subheading != blank %}
        <p class="subtitle">{{ section.settings.subheading }}</p>
      {% endif %}
    </div>

    {% if section.settings.intro != blank %}
      <div class="rte" style="margin-bottom:1.5rem">{{ section.settings.intro }}</div>
    {% endif %}

    <div class="comparison-table" style="overflow-x:auto">
      <table class="table" style="width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden">
        <thead>
          <tr>
            <th style="padding:1rem;text-align:left">{{ 'Specification' }}</th>
            {% for col in (1..section.settings.columns) %}
              <th style="padding:1rem;text-align:center">
                <select class="bike-select" data-column="{{ 'abcdefghijklmnopqrstuvwxyz' | slice: forloop.index0, 1 }}" style="width:100%;padding:.5rem;border:1px solid #ddd;border-radius:4px">
                  <option value="">{{ 'Select E-bike…' }}</option>
                  {% for key in section.settings.model_keys | split: ',' %}
                    <option value="{{ key | strip }}">{{ key | strip | replace: '-', ' ' | capitalize }}</option>
                  {% endfor %}
                </select>
              </th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% assign cols = section.settings.columns %}
          {% assign letters = 'abcdefghijklmnopqrstuvwxyz' %}
          {% assign fields = 'price|motor|battery|range|weight|frame|gears|brakes|suspension' | split: '|' %}
          {% for field in fields %}
            <tr>
              <td style="padding:1rem;background:#f8f9fa;font-weight:bold">{{ field | capitalize }}</td>
              {% for col in (0..cols | minus: 1) %}
                {% assign letter = letters | slice: col, 1 %}
                <td id="{{ field }}-{{ letter }}" style="padding:1rem;text-align:center">-</td>
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <div style="text-align:center;margin-top:1.5rem">
        <button type="button" class="button" onclick="resetComparison()">{{ section.settings.reset_label }}</button>
        {% if section.settings.cta_label != blank %}
          <a class="button" href="{{ section.settings.cta_link }}" style="margin-left:1rem">{{ section.settings.cta_label }}</a>
        {% endif %}
      </div>
    </div>
  </div>

  {%- comment -%}
    Script is globally included from layout/theme.liquid to avoid duplicate listeners
  {%- endcomment -%}
</section>

{% schema %}
{
  "name": "Custom – Bike Compare",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "E‑Bike Comparison" },
    { "type": "text", "id": "subheading", "label": "Subheading", "default": "Compare up to 3 bikes" },
    { "type": "richtext", "id": "intro", "label": "Intro text" },
    { "type": "range", "id": "columns", "min": 2, "max": 3, "step": 1, "label": "Columns", "default": 3 },
    { "type": "text", "id": "model_keys", "label": "Model keys (comma‑separated)", "default": "city-comfort, trekking-sport, mountain-trail, cargo-family" },
    { "type": "text", "id": "reset_label", "label": "Reset button label", "default": "Reset" },
    { "type": "text", "id": "cta_label", "label": "CTA label", "default": "Browse all e‑bikes" },
    { "type": "url", "id": "cta_link", "label": "CTA link", "default": "/collections/e-bikes" },
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding top", "default": 36 },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding bottom", "default": 36 }
  ],
  "presets": [
    { "name": "Bike Compare", "category": "Custom" }
  ]
}
{% endschema %}


