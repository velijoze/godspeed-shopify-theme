{{ 'section-footer-enhanced.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<footer class="footer-enhanced color-{{ section.settings.color_scheme }} gradient section-{{ section.id }}-padding">
  <div class="page-width">
    <div class="footer-enhanced__container">
      
      {%- comment -%} Main Menu Column {%- endcomment -%}
      <div class="footer-enhanced__column footer-enhanced__menu">
        <div class="footer-enhanced__menu-header">
          <span class="footer-enhanced__menu-icon">ðŸ”—</span>
          <h3 class="footer-enhanced__heading">{{ section.settings.menu_title | default: 'MAIN MENU' }}</h3>
          <button class="footer-enhanced__toggle" aria-expanded="false" aria-controls="footer-menu-{{ section.id }}">
            <span class="footer-enhanced__toggle-icon">+</span>
          </button>
        </div>
        <ul class="footer-enhanced__menu-list" id="footer-menu-{{ section.id }}">
          {%- for link in linklists[section.settings.menu].links -%}
            <li class="footer-enhanced__menu-item">
              <a href="{{ link.url }}" class="footer-enhanced__menu-link">{{ link.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </div>

      {%- comment -%} Our Promise Column {%- endcomment -%}
      <div class="footer-enhanced__column footer-enhanced__promise">
        <h3 class="footer-enhanced__heading">{{ section.settings.promise_title | default: 'OUR PROMISE' }}</h3>
        {%- if section.settings.promise_text != blank -%}
          <div class="footer-enhanced__text">
            {{ section.settings.promise_text }}
          </div>
        {%- endif -%}
      </div>

      {%- comment -%} Newsletter Column {%- endcomment -%}
      <div class="footer-enhanced__column footer-enhanced__newsletter">
        <div class="footer-enhanced__newsletter-placeholder">
          <div class="footer-enhanced__image-placeholder">
            <svg width="60" height="40" viewBox="0 0 60 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="1" y="1" width="58" height="38" rx="2" fill="#f1f3f4" stroke="#d0d7de" stroke-width="2"/>
              <circle cx="20" cy="15" r="4" fill="#8c959f"/>
              <path d="M12 28L20 22L28 28H12Z" fill="#8c959f"/>
              <path d="M32 12H48M32 16H44M32 20H40" stroke="#8c959f" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </div>
        </div>
        
        <h3 class="footer-enhanced__heading">{{ section.settings.newsletter_title | default: 'NEWSLETTER' }}</h3>
        {%- if section.settings.newsletter_text != blank -%}
          <p class="footer-enhanced__newsletter-text">{{ section.settings.newsletter_text }}</p>
        {%- endif -%}
        
        <form action="{{ routes.cart_add_url }}" method="post" class="footer-enhanced__newsletter-form" id="newsletter-form-{{ section.id }}">
          <div class="footer-enhanced__newsletter-input-wrapper">
            <input 
              type="email" 
              name="contact[email]" 
              class="footer-enhanced__newsletter-input" 
              placeholder="{{ section.settings.newsletter_placeholder | default: 'your-email@example.com' }}"
              required
              aria-label="Email address for newsletter">
            <button type="submit" class="footer-enhanced__newsletter-button" aria-label="Subscribe to newsletter">
              <svg width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 1L19 8L12 15M19 8H1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
        </form>
      </div>
    </div>

    {%- comment -%} Footer Bottom {%- endcomment -%}
    <div class="footer-enhanced__bottom">
      <div class="footer-enhanced__bottom-content">
        <div class="footer-enhanced__language">
          <select class="footer-enhanced__language-select">
            <option value="en">{{ section.settings.language_label | default: 'ENGLISH' }}</option>
          </select>
        </div>
        
        <div class="footer-enhanced__bottom-links">
          <span class="footer-enhanced__copyright">Â© {{ section.settings.copyright_text | default: 'GODSPEED EBIKE 2025' }}</span>
          {%- for link in linklists[section.settings.bottom_menu].links -%}
            <a href="{{ link.url }}" class="footer-enhanced__bottom-link">{{ link.title | upcase }}</a>
          {%- endfor -%}
          <span class="footer-enhanced__powered">{{ section.settings.powered_text | default: 'POWERED BY SHOPIFY' }}</span>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Mobile menu toggle
  const toggleButton = document.querySelector('.footer-enhanced__toggle');
  const menuList = document.querySelector('.footer-enhanced__menu-list');
  
  if (toggleButton && menuList) {
    toggleButton.addEventListener('click', function() {
      const isExpanded = this.getAttribute('aria-expanded') === 'true';
      this.setAttribute('aria-expanded', !isExpanded);
      menuList.classList.toggle('footer-enhanced__menu-list--open');
      this.querySelector('.footer-enhanced__toggle-icon').textContent = isExpanded ? '+' : 'âˆ’';
    });
  }
});
</script>

{% schema %}
{
  "name": "PIPELINE Footer Enhanced",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Main Menu"
    },
    {
      "type": "text",
      "id": "menu_title",
      "label": "Menu title",
      "default": "MAIN MENU"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "header",
      "content": "Our Promise"
    },
    {
      "type": "text",
      "id": "promise_title",
      "label": "Promise title",
      "default": "OUR PROMISE"
    },
    {
      "type": "richtext",
      "id": "promise_text",
      "label": "Promise text",
      "default": "<p>Experience the perfect blend of comfort and style with our premium products. Meticulously crafted with attention to detail, each item is designed to enhance your daily life. Discover quality that speaks for itself and elevate your experience with our thoughtfully designed collection.</p>"
    },
    {
      "type": "header",
      "content": "Newsletter"
    },
    {
      "type": "text",
      "id": "newsletter_title",
      "label": "Newsletter title",
      "default": "NEWSLETTER"
    },
    {
      "type": "text",
      "id": "newsletter_text",
      "label": "Newsletter text",
      "default": "Join to get special offers, free giveaways, and once-in-a-lifetime deals."
    },
    {
      "type": "text",
      "id": "newsletter_placeholder",
      "label": "Newsletter placeholder",
      "default": "your-email@example.com"
    },
    {
      "type": "header",
      "content": "Footer Bottom"
    },
    {
      "type": "text",
      "id": "language_label",
      "label": "Language label",
      "default": "ENGLISH"
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Copyright text",
      "default": "GODSPEED EBIKE 2025"
    },
    {
      "type": "link_list",
      "id": "bottom_menu",
      "label": "Bottom menu",
      "info": "Links for search, general conditions, legal information"
    },
    {
      "type": "text",
      "id": "powered_text",
      "label": "Powered by text",
      "default": "POWERED BY SHOPIFY"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 20
    }
  ],
  "presets": [
    {
      "name": "Footer Enhanced"
    }
  ]
}
{% endschema %}